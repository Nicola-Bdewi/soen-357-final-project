<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="sign-up.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
    <div class="card">
        <div class="text-center">
           <h3>Create an account</h3>
           <span class="abt">Already have an account? <a href="#">Sign In</a></span> 
        </div>
        <form id="signup-form" class="form mt-3 needs-validation" novalidate>
         <div class="inputbox">
            <input type="text" id="username" class="form-control" placeholder="Username" required>
            <div class="invalid-feedback">
               Please provide a username.
            </div>
         </div>
         <div class="input-group inputbox">
            <input type="text" id="firstname" placeholder="First name" class="form-control" required>
            <div class="invalid-feedback">
               Please provide your first name.
            </div>
            <input type="text" id="lastname" placeholder="Last name" class="form-control" required>
            <div class="invalid-feedback">
               Please provide your last name.
            </div>
         </div>
         <div class="inputbox">
            <input type="email" id="email" class="form-control" placeholder="Email" required>
            <div class="invalid-feedback">
               Please provide a valid email.
            </div>
         </div>
      </form>
      
        <div class="mt-4 proceed text-center d-flex justify-content-center">
           <button id="signup" class="btn btn-primary btn-block d-flex flex-row justify-content-between align-items-center">
              <div class="text-center"> <span>Sign Up</span> </div>
              <div class="text-right"> <span><i class="fa fa-long-arrow-right align-items-center"></i></span> </div>
           </button>
           <button id="spinner" class="btn btn-primary" type="button" disabled style="display: none;">
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              <span class="sr-only">Loading...</span>
           </button>
        </div>
        <div class="mt-1">
           <div class="form-check"> <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault"> <label class="form-check-label" for="flexCheckDefault"> I have read and agree to the <a href="#">Terms of service</a> </label> </div>
        </div>
     </div>

     <script>

$('#signup').click(function(e) {
    e.preventDefault();
    var username = $('#username').val();
    var firstname = $('#firstname').val();
    var lastname = $('#lastname').val();
    var email = $('#email').val();

    if (!username || !firstname || !lastname || !email) {
        alert('Please complete all fields.');
        return;
    }

    var users = [];

    var userExists = users.some(function(user) {
        return user.username === username && user.email === email;
    });

    if (userExists) {
        alert('User already exists.');
        return;
    }

    $('#signup').addClass('d-none');
    $('#spinner').show();

    users.push({
        username: username,
        firstname: firstname,
        lastname: lastname,
        email: email
    });

    console.log('User data saved.');

    setTimeout(function() {
        window.location.href = 'form-allergy.html';
    }, 3000);
});


     </script>
</body>
</html>
